var now=new Date,tahun=now.getFullYear(),bulan=now.getMonth()+1;moment.locale("id");var nama_bulan=moment().format("MMMM");function jumlah_hari(a,e){return new Date(e,a,0).getDate()}$(document).ready((function(){$("#title_statistik").text("Statistik Pengunjung Bulan "+nama_bulan),$("#sidebar_dashboard").addClass("active"),$.ajax({url:"https://raw.githubusercontent.com/topyk27/Antrian-PTSP/main/asset/mine/token/token.json",method:"GET",dataType:"json",beforeSend:function(){$(".loader2").show()},success:function(a){try{nama_pa==a[nama_pa_pendek][0].nama_pa&&nama_pa_pendek==a[nama_pa_pendek][0].nama_pa_pendek&&tkn==a[nama_pa_pendek][0].token||location.replace(base_url+"setting/awal")}catch(a){location.replace(base_url+"setting/awal")}$(".loader2").hide()},error:function(){$.ajax({url:base_url+"asset/mine/token/token.json",method:"GET",dataType:"json",success:function(a){nama_pa==a[nama_pa_pendek][0].nama_pa&&nama_pa_pendek==a[nama_pa_pendek][0].nama_pa_pendek&&tkn==a[nama_pa_pendek][0].token||location.replace(base_url+"setting/awal"),$(".loader2").hide()},error:function(a){$(".loader2").hide(),alert("Gagal dapat data token, harap hubungi administrator"),location.replace(base_url+"setting/awal")}})}}),$.ajax({url:base_url+"antrian/statistik",method:"get",dataType:"json",success:function(a){for(var e=jumlah_hari(bulan,tahun),t=[],n=[],o=a.antrian,r=1;r<=e;r++){let a=!1;for(var i in o){if(r==o[i].tanggal){n.push(parseInt(o[i].total)),a=!0;break}a=!1}a||n.push(0)}for(var s=1;s<=e;s++)t.push(s);var l={labels:t,datasets:[{label:"Pengunjung",backgroundColor:"rgba(0,255,255,1)",borderColor:"rgba(0,255,255,0.8)",pointRadius:!1,pointColor:"#3b8bba",pointStrokeColor:"rgba(60,141,188,1)",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(60,141,188,1)",data:n}]},p=$("#barChart").get(0).getContext("2d"),d=jQuery.extend(!0,{},l),u=l.datasets[0];d.datasets[0]=u;new Chart(p,{type:"bar",data:d,options:{responsive:!0,maintainAspectRatio:!1,datasetFill:!1,scales:{yAxes:[{ticks:{stepSize:1}}]},tooltips:{enabled:!0,mode:"single",callbacks:{title:function(a,e){return a[0].xLabel+" "+moment().format("MMMM")}}}}})}})}));